DECLARE @TRANSFER_PACKAGE_FROM_TO_DETAIL_ID INT
DECLARE @NO_OF_PAX INT
DECLARE @SITE_SEEING_SLAB_MASTER_ID INT
DECLARE @ADULT_SIC_RATE DECIMAL
DECLARE @CHILD_SIC_RATE DECIMAL
DECLARE @ADULT_PVT_RATE DECIMAL
DECLARE @CHILD_PVT_RATE DECIMAL
DECLARE @SLAB_ID INT

--CREATE TABLE #temp
--(
--TRANSFER_PACKAGE_FROM_TO_DETAIL_ID INT,
--SITE_SEEING_SLAB_MASTER_ID INT,
--NO_OF_PAX INT,
--ADULT_SIC_RATE DECIMAL,
--CHILD_SIC_RATE DECIMAL,
--ADULT_PVT_RATE DECIMAL,
--CHILD_PVT_RATE DECIMAL,
--SLAB_ID INT
--)

DECLARE @FetchTransferPriceId CURSOR
SET @FetchTransferPriceId = CURSOR FOR

    --(SELECT FSM.SLAB_ID,FSM.NO_OF_PAX FROM dbo.FIT_SLAB_MASTER AS FSM)
    SELECT TPFTD.TRANSFER_PACKAGE_FROM_TO_DETAIL_ID,TPFTD.ADULT_SIC_RATE,TPFTD.ADULT_PVT_RATE,TPFTD.CHILD_SIC_RATE,TPFTD.CHILD_PVT_RATE  FROM TRANSFER_PACKAGE_FROM_TO_DETAIL AS TPFTD
    
	
OPEN @FetchTransferPriceId
FETCH NEXT
FROM @FetchTransferPriceId INTO @TRANSFER_PACKAGE_FROM_TO_DETAIL_ID,@ADULT_SIC_RATE,@ADULT_PVT_RATE,@CHILD_SIC_RATE,@CHILD_PVT_RATE
WHILE @@FETCH_STATUS = 0
BEGIN
     -------------------------------- SIGHT_SEEING_PRICE -----------------------
     DECLARE @FetchSlabId CURSOR
     SET @FetchSlabId = CURSOR FOR
     (SELECT FSM.SLAB_ID,FSM.NO_OF_PAX FROM dbo.FIT_SLAB_MASTER AS FSM)
     OPEN @FetchSlabId
     FETCH NEXT
     FROM @FetchSlabId INTO @SLAB_ID,@NO_OF_PAX
     WHILE @@FETCH_STATUS = 0
     BEGIN
     PRINT '---------------------------------'
     PRINT @TRANSFER_PACKAGE_FROM_TO_DETAIL_ID
     DECLARE @ADULT_SIC_RATE1 DECIMAL(16,2)
     SET @ADULT_SIC_RATE1 = ( @NO_OF_PAX / 2 ) * @ADULT_SIC_RATE
     PRINT @ADULT_SIC_RATE1
     DECLARE @CHILD_SIC_RATE1 DECIMAL(16,2)
     SET @CHILD_SIC_RATE1= ( @NO_OF_PAX / 2 ) * @CHILD_SIC_RATE
     PRINT @CHILD_SIC_RATE1
     DECLARE @ADULT_PVT_RATE1 DECIMAL(16,2)
     SET @ADULT_PVT_RATE1= ( @NO_OF_PAX / 2 ) * @ADULT_PVT_RATE
     PRINT @ADULT_PVT_RATE1
     DECLARE @CHILD_PVT_RATE1 DECIMAL(16,2)
     SET @CHILD_PVT_RATE1= ( @NO_OF_PAX / 2 ) * @CHILD_PVT_RATE
     PRINT @CHILD_PVT_RATE1
     INSERT INTO TRANSFER_PACKAGE_PRICE_SLAB_WISE
     (
        TRANSFER_PACKAGE_FROM_TO_DETAIL_ID,
		NO_OF_PAX ,
		ADULT_SIC_RATE ,
		CHILD_SIC_RATE ,
		ADULT_PVT_RATE ,
		CHILD_PVT_RATE ,
		SLAB_ID
	 )
	VALUES
	(
		@TRANSFER_PACKAGE_FROM_TO_DETAIL_ID,
		@NO_OF_PAX,
		@ADULT_SIC_RATE1,
		@CHILD_SIC_RATE1,
		@ADULT_PVT_RATE1,
		@CHILD_PVT_RATE1,
		@SLAB_ID
	)
     
     FETCH NEXT
     FROM @FetchSlabId INTO @SLAB_ID,@NO_OF_PAX
     END
     CLOSE @FetchSlabId
     DEALLOCATE @FetchSlabId 

FETCH NEXT
FROM  @FetchTransferPriceId INTO @TRANSFER_PACKAGE_FROM_TO_DETAIL_ID,@ADULT_SIC_RATE,@ADULT_PVT_RATE,@CHILD_SIC_RATE,@CHILD_PVT_RATE
END
CLOSE @FetchTransferPriceId
DEALLOCATE @FetchTransferPriceId
